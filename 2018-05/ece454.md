# ECE 454: Distributed Computing.

Professor: Wojciech Golab.

## 2018 May 1

- Why build distributed systems?
  - [[Resource sharing saves money.]]
  - [[Simplifies business processes.]]
  - [[Scales beyond what a centralized system can.]]
  - [[Users may be distributed.]]

- Anecdote: Lord Kelvin vs. Edward Orange Wildman Whitehouse.
  - Entrepreneur Whitehouse fried transatlantic cable by pumping voltage,
    against engineer Kelvin's warning.

- Middleware: Offers a single-system view between applications and operating
  systems on different machines.
  - Common middleware services
    - [[Communication (e.g. add job to remote queue)]]
    - [[Transactions (e.g. access independent services atomically)]]
    - [[Service composition (e.g. Google map with weather forecast)]]
    - [[Reliability (e.g. replicated state machine)]]

- Goals of distributed systems:
  - Support resource sharing
  - Make distribution transparent (7 types... memorize them)
  - Be open, that is:
    - [[Interopable]]
    - [[Composable]]
    - [[Extensible]]
    - [[Policy separate from mechanism]]
  - Be scalable
    - [[Size]]
    - [[Geography]]
    - [[Administration]]
    - Avoid common mistakes that limit scalability:
      - Centralized services (e.g. a single server)
      - Centralized data (e.g. a single telephone book database)
      - Centralized algorithms (e.g. routing based on complete information)

## 2018 May 2

- Types of distribution transparency:
  - Access
  - Location
  - Relocation
  - Migration
  - Replication
  - Concurrency
  - Failure

- (2/3)c is the fastest light goes

- Scaling techniques:
  - Partitioning and distribution: Splitting stuff up
    - Example: Original DNS, which is a tree with zones
  - Replication: Having multiple copies of a thing
    - Example: memcached to speed up web apps
    - Can also have look-aside caching (look at cache and storage in parallel)

- Falsehoods programmers believe about distro
  - The network is reliable
  - The network is secure
  - The network is homogeneous
  - The topology does not change
  - Latency is zero
  - Bandwidth is infinite
  - Transport cost is zero
  - There is one administrator
- "Recall n of these" was on a previous exam

- Types of distributed systems
  - Website, web services
  - High performance computing (HPC)
    - Multiprocessor vs. multicomputer
    - Cluster computing
      - There is a master node that coordinates
    - Grid computing
    - Cloud computing
  - Transaction processing
  - Enterprise application integration
  - Internet of things (distributed pervasive systems)
  - Sensor networks
    - In-network data processing: When the sensors calculate things themselves
      rather than shunting data directly to the operator
    - Example: smart irrigation

- Shared memory vs. message passing
  - Shared memory is parallel computing
  - Message passing is distributed computing
  - Some theorists say they're both distributed computing

- Big Data: In one minute, many many things are happening.

## 2018 May 3

- Architecture (triggered)
  - ... is Components connected by Connectors

- Architectural styles (fuck)
  - layered
  - object-based (e.g. Enterprise Java Beans)
  - data-centred
  - event-based (e.g. Kafka)

- Multi-tiered architectures
  - Example: Client and Server are the two tiers. Then UI, App, and DB can be
    split across them in five ways (between the divisions, possibly with some
    software layer split between the two)

- Peer-to-peer systems
  - e.g. Chord: DHT with a ring overlay network (coool)
  - Resistant to **churn** (nodes entering and leaving)
  - Finger table: Kinda like skiplist. Allows lookup in log(n)

## 2018 May 8

- Hybrid architectures
  - Example: Bittorrent
  - Client gets .torrent file from website
  - Tracker tells you where nodes are
  - Nodes have actual data (this is the P2P part)
  - To deal with this, some police upload garbage to poison the data.

- Self-management: Use a feedback control loop to adjust system based on
  sensors

- Module 3: Processes

- Lightweight processes
  - For A1: OOM errors can actually mean that you ran out of processes.

- Multi-threaded servers
  - Often: one dispatcher thread, multiple worker threads

- Virtualization
  - Can be in a runtime environment (like JRE)
  - Can be on an OS running on top of a virtual machine monitor
  - In A2, whene prof spins up tha doop

- Types of message passing
  - Application-specific: Like Skype.
  - Application-independent: Like X Windows.

- Clusters
  - Three tiers
    - Load balancer(s)
    - Application/compute server
    - Distributed filesystem or database

## 2018 May 9

- Netcat examples.
  - nc www.uwaterloo.ca 80
  - GET / HTTP/1.0
  - GET / HTTP/1.1
    - Keeps connection open, as an HTTP/1.1 feature!
  - nc -l [-p] 10000
  - nc localhost 10000
- Kafka examples.

- Remote procedure calls.
  - Client stub: Bit of code on the client that sends the call
  - Server stub: Bit of code on the server that receives the call
  - Marshalling: Packing parameters into a message
    - Does endianness transformations
  - IDL: Interface Definition Language
  - Synchronous: Client waits for return value.
    - Like usual call center holds.
  - Asynchronous: Client doesn't wait. Instead, server calls client.
    - Like if a call center just takes your number and calls you back.
  - One-way: Client doesn't wait or care.

- Message queuing model.
  - Alternative to RPCs that use a shared scalable message queue.
  - Primitives:
    - Put: Append message to queue.
    - Get: Blocking get next message from queue.
    - Poll: Non-blocking get (option) next message from queue.
    - Notify: Install handler for when message is put into queue.

- Message-oriented middleware: Characterized by async message passing.
  - JMS: Java Message Service. Supports message queues and pubsub.

- Coupling among processes
  - Referential coupling: One process explicitly references another.
  - Temporal coupling: Communication processes must simply by running.

- RPC vs. MOM
  - RPC:
    - for two-way communication requiring a response
    - middleware linked into the client and server, no additional software
      required
    - tighter coupling
  - MOM:
    - response not required; just publishing information (like Trump's tweets)
    - middleware is a separate component between producer and consumer
    - looser coupling

- RPC demo

## 2018 May 10

- Apache Thrift.
  - Protobuf by Facebook for the entire world.
  - Software stack:
    - Server
    - Processor (compiler generated)
    - Protocol (JSON, compact, ...)
    - Transport (TCP, HTTP, ...)
  - Learn the IDL syntax
    - Types: bool, byte, i16, i32, i64, double, binary, string, void
    - Containers: list, set, map
    - Other types: const, typdef, enum, struct, exception
    - Field modifiers: required, optional, default values
    - Services and procedures: service, extends, oneway
    - Namespace: Java package (lel)
  - Field numbers can never be reused
